<ul class="categories">
  <% collection.arrange.each do |category, sub_item| %>
    <li>
      <%= link_to category.name, category_path(category) %>
      <% if category.has_children? %>
        <%= render partial: "category", locals: { collection: category.children } %>
      <% end %>
    </li>
  <% end %>
</ul>